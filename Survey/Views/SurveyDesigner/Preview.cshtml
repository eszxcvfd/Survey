@model SurveyDesignerViewModel
@{
    ViewData["Title"] = "Preview - " + Model.SurveyTitle;
    var questionsJson = System.Text.Json.JsonSerializer.Serialize(Model.Questions.OrderBy(q => q.QuestionOrder).Select(q => new {
        questionId = q.QuestionId,
        surveyId = q.SurveyId,
        questionText = q.QuestionText,
        questionType = q.QuestionType,
        questionOrder = q.QuestionOrder,
        isRequired = q.IsRequired,
        helpText = q.HelpText,
        options = q.Options.OrderBy(o => o.OptionOrder).Select(o => new {
            optionId = o.OptionId,
            optionText = o.OptionText,
            optionOrder = o.OptionOrder
        })
    }));
}

<div style="min-height: 100vh; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; padding: 24px;">
    <div class="card-surface" style="max-width: 800px; width: 100%; padding: 40px; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
        
        <!-- Preview Banner -->
        <div style="padding: 12px 16px; margin-bottom: 24px; border-radius: 8px; background-color: var(--md-sys-color-tertiary-container); display: flex; align-items: center; gap: 12px;">
            <span class="material-symbols-outlined" style="color: var(--md-sys-color-on-tertiary-container); font-size: 20px;">visibility</span>
            <span class="md-typescale-label-large" style="color: var(--md-sys-color-on-tertiary-container);">PREVIEW MODE</span>
            <div style="flex: 1;"></div>
            <md-icon-button href="@Url.Action("Index", "SurveyDesigner", new { id = Model.SurveyId })" title="Back to Editor">
                <md-icon>close</md-icon>
            </md-icon-button>
        </div>

        <!-- Survey Header -->
        <div style="margin-bottom: 32px; text-align: center;">
            <h1 class="md-typescale-headline-large" style="margin-bottom: 8px;">@Model.SurveyTitle</h1>
        </div>

        <!-- Question Container -->
        <div id="previewContainer" data-questions='@Html.Raw(questionsJson)'>
            <div id="currentQuestionContainer">
                <!-- Questions will be rendered here by JavaScript -->
            </div>
        </div>

        <!-- Navigation Buttons -->
        <div id="navigationButtons" style="display: flex; justify-content: space-between; gap: 12px; margin-top: 32px;">
            <md-text-button onclick="previousQuestion()" id="prevButton">
                <md-icon slot="icon">arrow_back</md-icon>
                Previous
            </md-text-button>
            <md-filled-button onclick="nextQuestion()" id="nextButton" style="min-width: 120px;">
                Next
                <md-icon slot="icon">arrow_forward</md-icon>
            </md-filled-button>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/survey-preview.js" asp-append-version="true"></script>
}